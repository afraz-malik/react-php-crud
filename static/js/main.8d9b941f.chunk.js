(this.webpackJsonpcrud=this.webpackJsonpcrud||[]).push([[0],{15:function(e,t,a){e.exports={App:"App_App__316XG",container:"App_container__J3Nd6",container2:"App_container2__37H6g",toggles:"App_toggles__35AY9"}},21:function(e,t,a){},22:function(e,t,a){e.exports={toggles:"Toggles_toggles__1E8CO"}},29:function(e,t,a){},35:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),c=a(8),r=a.n(c),i=(a(29),a(11)),o=a(12),l=a(14),d=a(13),u=a(15),h=a.n(u),j=a(3),f=a(4),b="https://fathomless-sea-03661.herokuapp.com/",p=a(7),_=a(9),m=a.n(_),O=a(0),g=function(e){var t=e.qual,a=e.counter,n=!1;return a>0&&(n=!0),Object(O.jsxs)("div",{className:m.a.qual,style:n?{borderTop:"1px solid black"}:null,children:[a+1,". \u2003",t]})},x=function(e){var t=e.counter,a=e.user,n=e.toggleForm,s=Object(p.c)(),c=function(){window.confirm("Are you sure you want to delete?")&&s(function(e){return function(t){t({type:"DELETE_USER"}),fetch("".concat(b,"delete_user.php"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){t({type:"DELETE_USER_SUCCESS",payload:e}),f.a.success("Successfully Deleted"),t({type:"FETCH_USER_START"}),fetch("".concat(b,"get_users.php")).then((function(e){return e.json()})).then((function(e){for(var a=[],n=0;n<e.fm.length;n++){a.push(Object(j.a)(Object(j.a)({},e.fm[n]),{},{qualification:[]}));for(var s=0;s<e.qual.length;s++)e.fm[n].fm_id===e.qual[s].fm_id&&a[n].qualification.push(e.qual[s])}t({type:"FETCH_USER_SUCCESS",payload:a})})).catch((function(e){t({type:"FETCH_USER_FAILED",payload:e}),f.a.error("Auto Fetching Failed. Refreshing Now..."),window.location.reload()}))})).catch((function(e){f.a.error("Deleting User Failed"),f.a.info(e.message),t({type:"DELETE_USER_FAILED",payload:e})}))}}(a))},r=function(){var e;s((e=a,console.log(e),{type:"EDIT_USER",payload:e})),n()};return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:t}),Object(O.jsx)("td",{children:a.fm_name}),Object(O.jsx)("td",{children:a.fm_address}),Object(O.jsx)("td",{children:a.fm_designation}),Object(O.jsxs)("td",{children:["Rs. ",a.fm_salary]}),Object(O.jsx)("td",{children:a.qualification.map((function(e,t){return Object(O.jsx)(g,{counter:t,qual:e.degree_tittle},t)}))}),Object(O.jsx)("td",{children:a.qualification.map((function(e,t){return Object(O.jsx)(g,{counter:t,qual:e.year_of_passing},t)}))}),Object(O.jsx)("td",{children:a.qualification.map((function(e,t){return Object(O.jsx)(g,{counter:t,qual:e.institute_attended},t)}))}),Object(O.jsxs)("td",{children:[Object(O.jsx)("button",{className:m.a.btn,onClick:function(){return r()},children:Object(O.jsx)("i",{className:"fa fa-pencil"})}),Object(O.jsx)("button",{className:m.a.btn,onClick:function(){return c()},children:Object(O.jsx)("i",{className:"fa fa-trash"})})]})]})},y=function(e){var t=e.users,a=e.toggleForm;return Object(O.jsx)("div",{className:m.a.body,children:Object(O.jsxs)("table",{children:[Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:"#"}),Object(O.jsx)("th",{children:"Name"}),Object(O.jsx)("th",{children:"Address"}),Object(O.jsx)("th",{children:"Designation"}),Object(O.jsx)("th",{children:"Salary"}),Object(O.jsx)("th",{children:"Degree_Title"}),Object(O.jsx)("th",{children:"Year_of_Passing"}),Object(O.jsx)("th",{children:"Institute_Attended"}),Object(O.jsx)("th",{children:"Actions"})]}),t.map((function(e,n){return Object(O.jsx)(x,{user:t[n],counter:n+1,toggleForm:a},n)}))]})})},S=a(20),C=a(6),E=(a(21),a(19)),v=a.n(E),U=function(e){var t=e.qual,a=e.handleQual,n=e.index,s=e.handleRemoved;return Object(O.jsxs)("div",{className:"qual".concat(t.q_id),children:[n>0?Object(O.jsxs)("div",{className:"addless",children:[Object(O.jsx)("span",{className:"span",style:{color:"lightgrey"}}),Object(O.jsx)("span",{className:"span3",onClick:function(){return s(n,t.q_id)},children:"Remove"}),Object(O.jsx)("hr",{className:"hr"})]}):null,Object(O.jsxs)("div",{className:"row1",children:[Object(O.jsxs)("label",{htmlFor:"institute",children:[Object(O.jsx)("i",{className:"fa fa-institution"})," Institute Attended"]}),Object(O.jsx)("input",{type:"text",id:"institute",name:"institute_attended",placeholder:"Institute name ...",value:t.institute_attended,onChange:function(e){return a(e,n)},required:!0})]}),Object(O.jsxs)("div",{className:"row",children:[Object(O.jsxs)("div",{className:"col-50",children:[Object(O.jsxs)("label",{htmlFor:"egree",children:[Object(O.jsx)("i",{className:"fa fa-graduation-cap","aria-hidden":"true"})," Degree Title"]}),Object(O.jsx)("input",{type:"text",id:"degree",name:"degree_tittle",placeholder:"Degree title here ...",value:t.degree_tittle,onChange:function(e){return a(e,n)},required:!0})]}),Object(O.jsxs)("div",{className:"col-50",children:[Object(O.jsxs)("label",{htmlFor:"year",children:[Object(O.jsx)("i",{className:"fa fa-calendar","aria-hidden":"true"})," Year of Passing"]}),Object(O.jsx)("input",{type:"number",id:"year",name:"year_of_passing",placeholder:"Year only ...",value:t.year_of_passing,onChange:function(e){return a(e,n)},required:!0})]})]})]})},q={q_id:"",institute_attended:"",degree_tittle:"",year_of_passing:""},D={fm_name:"",fm_salary:"",fm_address:"",fm_designation:"",qualification:[q],counter:1,removedItem:[]},N=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState(Object(j.a)(Object(j.a)({},n.state),{},Object(C.a)({},e.target.name,e.target.value)))},n.handleQual=function(e,t){var a;!n.state.qualification[t].q_id&&n.props.oldUser?n.setState(v()(n.state,{qualification:Object(C.a)({},t,{$set:Object(j.a)(Object(j.a)({},n.state.qualification[t]),{},(a={},Object(C.a)(a,e.target.name,e.target.value),Object(C.a)(a,"q_id",String(parseInt(n.state.qualification[t-1].q_id)+1)),a))})})):n.setState(v()(n.state,{qualification:Object(C.a)({},t,{$set:Object(j.a)(Object(j.a)({},n.state.qualification[t]),{},Object(C.a)({},e.target.name,e.target.value))})}))},n.handleSubmit=function(e){e.preventDefault(),n.props.oldUser?n.props.updateUser(n.state):n.props.addUser(n.state),n.props.toggleDatabase(),n.setState(D)},n.cancelUpdate=function(){n.props.oldUser?(n.props.cancelUpdate(),n.props.toggleDatabase()):n.setState(D)},n.addCounter=function(){n.setState((function(e){return{qualification:[].concat(Object(S.a)(e.qualification),[q])}}))},n.handleRemoved=function(e,t){n.state.removedItem.push(t),console.log(n.state.removedItem);var a=Object(S.a)(n.state.qualification);-1!==e&&(a.splice(e,1),n.setState({qualification:a}))},n.props.oldUser?n.state=Object(j.a)(Object(j.a)({},n.props.oldUser),{},{counter:n.props.oldUser.qualification.length,removedItem:[]}):n.state=D,n}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return Object(O.jsx)("div",{className:"container",children:Object(O.jsxs)("form",{method:"post",onSubmit:this.handleSubmit,children:[Object(O.jsxs)("div",{className:"row",children:[Object(O.jsxs)("div",{className:"col-50",children:[Object(O.jsx)("h3",{children:"Personal Information"}),Object(O.jsxs)("label",{htmlFor:"name",children:[Object(O.jsx)("i",{className:"fa fa-user"})," Full Name"]}),Object(O.jsx)("input",{type:"text",id:"name",name:"fm_name",placeholder:"Your name here ...",value:this.state.fm_name,onChange:this.handleChange,required:!0}),Object(O.jsxs)("label",{htmlFor:"address",children:[Object(O.jsx)("i",{className:"fa fa-address-card-o"})," Address"]}),Object(O.jsx)("input",{type:"text",id:"address",name:"fm_address",placeholder:"Your address here ...",value:this.state.fm_address,onChange:this.handleChange,required:!0}),Object(O.jsxs)("label",{htmlFor:"designation",children:[Object(O.jsx)("i",{className:"fa fa-briefcase"})," Designation"]}),Object(O.jsx)("input",{type:"text",id:"designation",name:"fm_designation",placeholder:"Your designation here ...",value:this.state.fm_designation,onChange:this.handleChange,required:!0}),Object(O.jsxs)("label",{htmlFor:"salary",children:[Object(O.jsx)("i",{className:"fa fa-usd","aria-hidden":"true"})," Salary"]}),Object(O.jsx)("input",{type:"number",id:"salary",name:"fm_salary",placeholder:"PKR",value:this.state.fm_salary,onChange:this.handleChange,required:!0})]}),Object(O.jsxs)("div",{className:"col-50 second",children:[Object(O.jsx)("div",{className:"qualification",children:Object(O.jsx)("h3",{children:"Qualification"})}),this.state.qualification.map((function(t,a){return Object(O.jsx)(U,{qual:t,handleRemoved:e.handleRemoved,handleQual:e.handleQual,index:a},a)})),Object(O.jsxs)("div",{className:"addmore",children:[Object(O.jsx)("span",{className:"span",style:{color:"lightgrey"},onClick:function(){return e.addCounter()},children:"\uff0b"}),Object(O.jsx)("span",{className:"span2",onClick:function(){return e.addCounter()},children:"Add More"}),Object(O.jsx)("hr",{className:"hr",onClick:function(){return e.addCounter()}})]})]})]}),Object(O.jsxs)("label",{children:[Object(O.jsx)("input",{type:"checkbox",name:"sameadr",required:!0})," ",Object(O.jsx)("span",{children:"I hereby verified the above information is correct and verified as per Terms & Conditions of Faculty Directory of Multi University"})]}),Object(O.jsxs)("div",{className:"cancel",children:[Object(O.jsx)("input",{type:"submit",value:this.props.oldUser?"Update In database":"Save in database",className:"btn "}),Object(O.jsx)("button",{className:"btn cancelbtn",type:"button",onClick:function(){return e.cancelUpdate()},children:this.props.oldUser?"Cancel":"Clear All"})]})]})})}}]),a}(s.a.Component),F=Object(p.b)(null,(function(e){return{addUser:function(t){return e(function(e){return function(t){t({type:"ADD_USER_IN_DB_START"}),fetch("".concat(b,"add_user.php"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){f.a.success("Successfully added in Database"),t({type:"ADD_USER_IN_DB_SUCCESS",payload:e}),fetch("".concat(b,"get_users.php")).then((function(e){return e.json()})).then((function(e){for(var a=[],n=0;n<e.fm.length;n++){a.push(Object(j.a)(Object(j.a)({},e.fm[n]),{},{qualification:[]}));for(var s=0;s<e.qual.length;s++)e.fm[n].fm_id===e.qual[s].fm_id&&a[n].qualification.push(e.qual[s])}t({type:"FETCH_USER_SUCCESS",payload:a})})).catch((function(e){t({type:"FETCH_USER_FAILED",payload:e}),f.a.error("Auto Fetching Failed. Refreshing Page..."),window.location.reload()}))})).catch((function(e){t({type:"ADD_USER_IN_DB_FAILED",payload:e}),f.a.error("Adding Data Failed"),f.a.info(e.message,20)}))}}(t))},updateUser:function(t){return e((a=t,function(e){e({type:"UPDATE_USER"}),fetch("".concat(b,"update_user.php"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(t){console.log(t),e({type:"UPDATE_USER_SUCCESS",payload:t}),f.a.success("Information Updated"),e({type:"FETCH_USER_START"}),fetch("".concat(b,"get_users.php")).then((function(e){return e.json()})).then((function(t){for(var a=[],n=0;n<t.fm.length;n++){a.push(Object(j.a)(Object(j.a)({},t.fm[n]),{},{qualification:[]}));for(var s=0;s<t.qual.length;s++)t.fm[n].fm_id===t.qual[s].fm_id&&a[n].qualification.push(t.qual[s])}e({type:"FETCH_USER_SUCCESS",payload:a})})).catch((function(t){e({type:"FETCH_USER_FAILED",payload:t}),f.a.error("Auto Fetching Failed. Refreshing Now..."),window.location.reload()}))})).catch((function(t){f.a.error("Update Failed"),e({type:"UPDATE_USER_FAILED",payload:t})}))}));var a},cancelUpdate:function(){return e((f.a.info("Cancelled"),{type:"CANCEL_UPDATE"}))}}}))(N),A=a(22),T=a.n(A),R=function(e){var t=e.form,a=e.database,n=e.oldUser,s=e.toggleDatabase,c=e.toggleForm;return Object(O.jsxs)("div",{className:T.a.toggles,children:[Object(O.jsx)("button",{onClick:function(){return c()},style:t?{backgroundColor:"#04aa6d",color:"white"}:null,children:n?"Update Faculty Member":"Add Faculty Member"}),Object(O.jsx)("button",{onClick:function(){return s()},style:a?{backgroundColor:"#04aa6d",color:"white"}:null,children:"Database"})]})},L=a(5),I=a.n(L),w=function(e){var t=e.database,a=e.searchValue,n=e.onSearchChange,s=e.clearSearchValue,c=e.form;return Object(O.jsxs)("div",{children:[t?Object(O.jsxs)("div",{className:I.a.titlebar,children:[Object(O.jsx)("h5",{children:"Faculty Database "}),Object(O.jsxs)("div",{className:I.a.searchBox_fakeInput,children:[Object(O.jsx)("div",{className:I.a.searchBox_inputWrapper,children:Object(O.jsx)("input",{id:"myInput",type:"text",className:"".concat(I.a.form_control," ").concat(I.a.searchBox_input," ").concat(I.a.js_searchBox_input),value:a,onChange:n,placeholder:"Search"})}),Object(O.jsx)("div",{className:I.a.searchBox_clearWrapper,children:Object(O.jsx)("span",{style:a?{display:"block"}:{display:"none"},className:"".concat(I.a.searchBox_clear," ").concat(I.a.js_clearSearchBox),onClick:function(){return s()},children:Object(O.jsx)("i",{className:"fa fa-times-circle"})})})]})]}):null,c?Object(O.jsx)("div",{className:I.a.titlebar,children:Object(O.jsxs)("h5",{children:["Faculty Directory for Multi Universities \u2002",Object(O.jsxs)("span",{className:I.a.tooltip,children:[Object(O.jsx)("span",{className:I.a.tooltiptext,children:Object(O.jsxs)("ul",{children:[Object(O.jsx)("h5",{children:"Instructions"}),Object(O.jsx)("li",{children:"All fields are mandatory."}),Object(O.jsx)("li",{children:"As Per given instructions Tables are in One To Many Relation"}),Object(O.jsx)("li",{children:"Thus, You can add more than one Qualification box, By clicking Add More"}),Object(O.jsx)("li",{children:"One Qualification Box field's are mandatory "}),Object(O.jsx)("li",{children:"You can Remove Specific Qualification field. Click on Edit and remove the field"}),Object(O.jsx)("li",{children:"Also, You can update even signle qualification field or you can delete one qualification field"})]})}),"\u24d8"]})]})}):null]})},B=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).toggleDatabase=function(){n.setState({database:!n.state.database,form:!1,searchValue:""})},n.toggleForm=function(){n.setState({database:!1,form:!n.state.form})},n.onSearchChange=function(e){n.setState({searchValue:e.target.value})},n.clearSearchValue=function(){n.setState({searchValue:""})},n.state={database:!1,form:!0,searchValue:""},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.props.getUser()}},{key:"render",value:function(){var e=this.state,t=e.form,a=e.database,n=e.searchValue,s=this.props,c=s.oldUser,r=s.users.filter((function(e){return e.fm_name.toLowerCase().includes(n.toLowerCase())||e.fm_address.toLowerCase().includes(n.toLowerCase())||e.fm_designation.toLowerCase().includes(n.toLowerCase())||e.fm_salary.toLowerCase().includes(n.toLowerCase())||e.qualification.includes(n.toLowerCase())||e.qualification[0].degree_tittle.toLowerCase().includes(n.toLowerCase())||e.qualification[0].year_of_passing.toLowerCase().includes(n.toLowerCase())||e.qualification[0].institute_attended.toLowerCase().includes(n.toLowerCase())}));return Object(O.jsx)("div",{className:h.a.App,children:Object(O.jsxs)("div",{className:h.a.container,children:[Object(O.jsx)(R,{form:t,database:a,oldUser:c,toggleDatabase:this.toggleDatabase,toggleForm:this.toggleForm}),Object(O.jsxs)("div",{className:h.a.container2,children:[Object(O.jsx)(w,{database:a,form:t,searchValue:n,onSearchChange:this.onSearchChange,clearSearchValue:this.clearSearchValue}),a?Object(O.jsx)(y,{toggleForm:this.toggleForm,users:r}):null,t?Object(O.jsx)(F,{oldUser:c,toggleDatabase:this.toggleDatabase}):null]})]})})}}]),a}(s.a.Component),k=Object(p.b)((function(e){return{users:e.userReducer.users,qual:e.userReducer.qual,oldUser:e.userReducer.oldUser}}),(function(e){return{getUser:function(){return e((function(e){e({type:"FETCH_USER_START"}),fetch("".concat(b,"get_users.php")).then((function(e){return e.json()})).then((function(t){for(var a=[],n=0;n<t.fm.length;n++){a.push(Object(j.a)(Object(j.a)({},t.fm[n]),{},{qualification:[]}));for(var s=0;s<t.qual.length;s++)t.fm[n].fm_id===t.qual[s].fm_id&&a[n].qualification.push(t.qual[s])}e({type:"FETCH_USER_SUCCESS",payload:a}),f.a.success("Database Connected")})).catch((function(t){e({type:"FETCH_USER_FAILED",payload:t}),f.a.error("Database Connecting Failed"),f.a.info(t.message,5e3)}))}))}}}))(B),P=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,36)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),n(e),s(e),c(e),r(e)}))},H=a(16),V=a(23),Y=a(24),M={users:[],isLoading:!1,error:null,message:null,oldUser:null},Q=Object(H.b)({userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_USER_START":case"ADD_USER_IN_DB_START":case"DELETE_USER":return Object.assign({},e,{isLoading:!0,error:null,oldUser:null});case"FETCH_USER_SUCCESS":return Object.assign({},e,{users:t.payload,isLoading:!1,error:null,oldUser:null});case"ADD_USER_IN_DB_SUCCESS":case"DELETE_USER_SUCCESS":return Object.assign({},e,{isLoading:!1,message:t.payload,error:null,oldUser:null});case"FETCH_USER_FAILED":case"ADD_USER_IN_DB_FAILED":case"DELTE_USER_FAILED":return Object.assign({},e,{isLoading:!1,error:t.payload,oldUser:null});case"EDIT_USER":return Object.assign({},e,{oldUser:t.payload});case"CANCEL_UPDATE":return Object.assign({},e,{oldUser:null});default:return e}}}),J=Object(Y.createLogger)(),W=Object(H.c)(Q,Object(H.a)(V.a,J));r.a.render(Object(O.jsx)(s.a.StrictMode,{children:Object(O.jsx)(p.a,{store:W,children:Object(O.jsx)(k,{})})}),document.getElementById("root")),P()},5:function(e,t,a){e.exports={titlebar:"titlebar_titlebar__1NbU1",searchBox_fakeInput:"titlebar_searchBox_fakeInput__1tYLQ",searchBox_inputWrapper:"titlebar_searchBox_inputWrapper__1nse0",searchBox_clearWrapper:"titlebar_searchBox_clearWrapper__2yNOw",searchBox_input:"titlebar_searchBox_input__nSNys",searchBox_clear:"titlebar_searchBox_clear__2jIS8",searchBox_clearInput:"titlebar_searchBox_clearInput__4-i_X",tooltip:"titlebar_tooltip__v_37A",tooltiptext:"titlebar_tooltiptext__1PjbA"}},9:function(e,t,a){e.exports={boxmodel:"Boxmodel_boxmodel__1zxCf",body:"Boxmodel_body__3V028",btn:"Boxmodel_btn__1rJEt",qual:"Boxmodel_qual__3xb06"}}},[[35,1,2]]]);
//# sourceMappingURL=main.8d9b941f.chunk.js.map